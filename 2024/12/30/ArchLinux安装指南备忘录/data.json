{"title":"ArchLinux安装指南备忘录","date":"2024-12-30T11:49:00.000Z","toc":true,"summary":"ArchLinux手动安装教程","source":"_posts/ArchLinux安装指南备忘录.md","raw":"---\ntitle: ArchLinux安装指南备忘录\ndate: 2024-12-30 19:49:00\ntags:\n    - linux\ntoc: true\nsummary: \"ArchLinux手动安装教程\"\n---\n\n## 准备好最新的ISO镜像\n\n可以从[这里](https://mirrors.bfsu.edu.cn/archlinux/iso/)下载。\n\n## 使用U盘引导\n\n我使用的是Ventoy。\n\n## SGX错误导致不能从启动盘启动\n\n>错误比较玄学，不懂原理。解决方法，使用grub引导进入iso。\n\n## 换源\n\n使用vim修改`/etc/pacman.d/mirrorlist`，修改为`Server = http://mirrors.bfsu.edu.cn/archlinux/$repo/os/$arch`。\n\n## 联网\n\n有线网开机后自动配置无需联网。无线网需要连接wifi。\n\n### 使用ip link检测网络接口\n\n一般情况下无线网络接口为wlan x，一般为wlan0。\n\n### 使用iwctl认证无线网络\n\n使用方法：使用`iwctl`进入交互界面。<mark>(一定要注意dhcpd服务是否已经打开)</mark>\n\n| 方法 | 作用 |\n| :--------: | :--------: |\n|help|显示命令详情|\n|device list|列出所有wifi设备|\n|station device_name scan|使用某个设备扫描wifi|\n|station device_name get-networks|列出所有可用的网络|\n|station device_name connect SSID|连接到一个网络|\n\n### 连接完毕后验证\n\n使用`ping baidu.com`来检测连通性。\n\n## 设置时间\n\n使用`timedatectl set-timezone Asia/Shanghai`\n\n## 更新pacman缓存\n\n使用`pacman -Syy`\n\n## 创建硬盘分区\n\n### 使用fdisk /dev/硬盘 来进行分区\n\n进入fidsk交互窗口之前，可以使用`fdisk -l`来查询设备上的硬盘有哪些。(忽略以 rom、loop 或者airootfs结尾和以 rpbm、boot0 或者 boot1 结尾的 mmcblk* 结尾的设备。)\n\n### 建立挂载点 / 和 /boot 所对应分区，按需求建立SWAP分区\n\n建立的类型大小和挂载点对应关系见[这里](https://wiki.archlinuxcn.org/wiki/%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97#%E5%BB%BA%E7%AB%8B%E7%A1%AC%E7%9B%98%E5%88%86%E5%8C%BA)\n\n### 本次采用GPT+UEFI模式，所以使用到EFI分区，更改分区类型\n\n更改分区类型，比如`/`分区为Linux filesystem类型，`/boot`为EFI System分区类型，`SWAP`为Linux swap分区类型。\n在fdisk中 使用命令t更改。\n\n### 格式化分区\n\n<mark>注意：这里操作的是分区不是硬盘</mark>\n根目录所用分区使用`mkfs.ext4 /dev/分区`。\n交换空间分区使用`mkswap /dev/swap_partition`。\nEFI 系统分区使用`mkfs.fat -F 32 /dev/efi_system_partition`命令格为fat32格式。\n<mark> 注意：如果efi分区内已经有其他系统的efi记录则不要格式化，否则可能会破坏其他系统启动。 </mark>\n\n## 挂载分区\n\n<mark>注意：一定要按照顺序挂载</mark>\n首先挂载根目录使用`mount /dev/根目录分区  /mnt`,\n然后创建efi目录并挂载EFI分区使用`mkdir /mnt/efi && mount /dev/EFI分区 /mnt/efi`,\n最后挂载swap分区`swapon /dev/swap_partition（交换空间分区）`。\n\n## 开始安装\n\n使用`pacstrap -K /mnt base base-devel intel-ucode linux linux-firmware vim vi dhcpcd iwd net-tools NetworkManager`如果有其他需要安装的软件一并写到后面。\n>这时候建议把一些中文字体一并安装好`sudo pacman -S adobe-source-han-serif-cn-fonts adobe-source-han-sans-cn-fonts adobe-source-code-pro-fonts noto-fonts-cjk`\n\n## 配置系统\n\n### 生成 fstab 文件\n\n> genfstab -U /mnt >> /mnt/etc/fstab\n\n### chroot 到新安装的系统\n\n> arch-chroot /mnt\n\n### 设置 root 密码\n\n> passwd\n\n## 重启继续配置\n\n### 启动网络相关服务并联网\n\n`systemctl enable iwd dhcpcd`并且start他们。\n使用`iwctl`工具联网。\n\n#### 也可使用NetworkManager联网\n\n使用之前要start并且enable`NetworkManager`服务，注意大小写。然后使用`nmtui`联网，这个工具在装好字体后可以连接中文wifi。\n\n### 检查mirrorlist是否正确\n\n之后运行`pacman -Syyu`更新pacman缓存。\n\n## 添加普通用户并划分组别\n\n```bash\n#创建新用户username并且使其加入到wheel组中\nuseradd -m -G wheel -s /bin/bash username\n#更改密码\npasswd username\n#修改sudoers文件，使wheel用户组拥有使用sudo的权限\nvisudo\n#然后取消%wheel ALL=(ALL) ALL这一行的注释，使其生效\n```\n\n## 更改时间\n\n更改时间首先需要更改时区，使用`timedatectl set-timezone Asia/Shanghai`。之后使用[systemd-timesyncd](https://wiki.archlinuxcn.org/wiki/Systemd-timesyncd)来进行时间同步。把配置文件`/etc/systemd/timesyncd.conf`中的`NTP`字段改为如下。\n>NTP=0.cn.pool.ntp.org 1.cn.pool.ntp.org 2.cn.pool.ntp.org 3.cn.pool.ntp.org\n\n然后\n\n```bash\n#启用ntp\ntimedatectl set-ntp true\n#启用服务\nsystemctl enable systemd-timesyncd\n```\n\n## 安装基本完毕\n\n## 参考教程\n\n[官方安装指南](https://wiki.archlinuxcn.org/wiki/%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97)\n[Linux用户管理](https://gitcode.csdn.net/66e10c20cd8b2677c3bd09f8.html)\n[Linux修改权限控制](https://blog.csdn.net/Antonio915/article/details/144803692)\n","slug":"ArchLinux安装指南备忘录","published":true,"updated":"2024-12-31T14:07:34.055Z","_id":"cm5dxxj150000dwo23m978iww","comments":true,"layout":"post","photos":[],"html":"<h2 id=\"准备好最新的ISO镜像\"><a href=\"#准备好最新的ISO镜像\" class=\"headerlink\" title=\"准备好最新的ISO镜像\"></a>准备好最新的ISO镜像</h2><p>可以从<a href=\"https://mirrors.bfsu.edu.cn/archlinux/iso/\">这里</a>下载。</p>\n<h2 id=\"使用U盘引导\"><a href=\"#使用U盘引导\" class=\"headerlink\" title=\"使用U盘引导\"></a>使用U盘引导</h2><p>我使用的是Ventoy。</p>\n<h2 id=\"SGX错误导致不能从启动盘启动\"><a href=\"#SGX错误导致不能从启动盘启动\" class=\"headerlink\" title=\"SGX错误导致不能从启动盘启动\"></a>SGX错误导致不能从启动盘启动</h2><blockquote>\n<p>错误比较玄学，不懂原理。解决方法，使用grub引导进入iso。</p>\n</blockquote>\n<h2 id=\"换源\"><a href=\"#换源\" class=\"headerlink\" title=\"换源\"></a>换源</h2><p>使用vim修改<code>/etc/pacman.d/mirrorlist</code>，修改为<code>Server = http://mirrors.bfsu.edu.cn/archlinux/$repo/os/$arch</code>。</p>\n<h2 id=\"联网\"><a href=\"#联网\" class=\"headerlink\" title=\"联网\"></a>联网</h2><p>有线网开机后自动配置无需联网。无线网需要连接wifi。</p>\n<h3 id=\"使用ip-link检测网络接口\"><a href=\"#使用ip-link检测网络接口\" class=\"headerlink\" title=\"使用ip link检测网络接口\"></a>使用ip link检测网络接口</h3><p>一般情况下无线网络接口为wlan x，一般为wlan0。</p>\n<h3 id=\"使用iwctl认证无线网络\"><a href=\"#使用iwctl认证无线网络\" class=\"headerlink\" title=\"使用iwctl认证无线网络\"></a>使用iwctl认证无线网络</h3><p>使用方法：使用<code>iwctl</code>进入交互界面。<mark>(一定要注意dhcpd服务是否已经打开)</mark></p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">方法</th>\n<th align=\"center\">作用</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">help</td>\n<td align=\"center\">显示命令详情</td>\n</tr>\n<tr>\n<td align=\"center\">device list</td>\n<td align=\"center\">列出所有wifi设备</td>\n</tr>\n<tr>\n<td align=\"center\">station device_name scan</td>\n<td align=\"center\">使用某个设备扫描wifi</td>\n</tr>\n<tr>\n<td align=\"center\">station device_name get-networks</td>\n<td align=\"center\">列出所有可用的网络</td>\n</tr>\n<tr>\n<td align=\"center\">station device_name connect SSID</td>\n<td align=\"center\">连接到一个网络</td>\n</tr>\n</tbody></table>\n<h3 id=\"连接完毕后验证\"><a href=\"#连接完毕后验证\" class=\"headerlink\" title=\"连接完毕后验证\"></a>连接完毕后验证</h3><p>使用<code>ping baidu.com</code>来检测连通性。</p>\n<h2 id=\"设置时间\"><a href=\"#设置时间\" class=\"headerlink\" title=\"设置时间\"></a>设置时间</h2><p>使用<code>timedatectl set-timezone Asia/Shanghai</code></p>\n<h2 id=\"更新pacman缓存\"><a href=\"#更新pacman缓存\" class=\"headerlink\" title=\"更新pacman缓存\"></a>更新pacman缓存</h2><p>使用<code>pacman -Syy</code></p>\n<h2 id=\"创建硬盘分区\"><a href=\"#创建硬盘分区\" class=\"headerlink\" title=\"创建硬盘分区\"></a>创建硬盘分区</h2><h3 id=\"使用fdisk-dev-硬盘-来进行分区\"><a href=\"#使用fdisk-dev-硬盘-来进行分区\" class=\"headerlink\" title=\"使用fdisk &#x2F;dev&#x2F;硬盘 来进行分区\"></a>使用fdisk &#x2F;dev&#x2F;硬盘 来进行分区</h3><p>进入fidsk交互窗口之前，可以使用<code>fdisk -l</code>来查询设备上的硬盘有哪些。(忽略以 rom、loop 或者airootfs结尾和以 rpbm、boot0 或者 boot1 结尾的 mmcblk* 结尾的设备。)</p>\n<h3 id=\"建立挂载点-和-boot-所对应分区，按需求建立SWAP分区\"><a href=\"#建立挂载点-和-boot-所对应分区，按需求建立SWAP分区\" class=\"headerlink\" title=\"建立挂载点 &#x2F; 和 &#x2F;boot 所对应分区，按需求建立SWAP分区\"></a>建立挂载点 &#x2F; 和 &#x2F;boot 所对应分区，按需求建立SWAP分区</h3><p>建立的类型大小和挂载点对应关系见<a href=\"https://wiki.archlinuxcn.org/wiki/%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97#%E5%BB%BA%E7%AB%8B%E7%A1%AC%E7%9B%98%E5%88%86%E5%8C%BA\">这里</a></p>\n<h3 id=\"本次采用GPT-UEFI模式，所以使用到EFI分区，更改分区类型\"><a href=\"#本次采用GPT-UEFI模式，所以使用到EFI分区，更改分区类型\" class=\"headerlink\" title=\"本次采用GPT+UEFI模式，所以使用到EFI分区，更改分区类型\"></a>本次采用GPT+UEFI模式，所以使用到EFI分区，更改分区类型</h3><p>更改分区类型，比如<code>/</code>分区为Linux filesystem类型，<code>/boot</code>为EFI System分区类型，<code>SWAP</code>为Linux swap分区类型。<br>在fdisk中 使用命令t更改。</p>\n<h3 id=\"格式化分区\"><a href=\"#格式化分区\" class=\"headerlink\" title=\"格式化分区\"></a>格式化分区</h3><p><mark>注意：这里操作的是分区不是硬盘</mark><br>根目录所用分区使用<code>mkfs.ext4 /dev/分区</code>。<br>交换空间分区使用<code>mkswap /dev/swap_partition</code>。<br>EFI 系统分区使用<code>mkfs.fat -F 32 /dev/efi_system_partition</code>命令格为fat32格式。<br><mark> 注意：如果efi分区内已经有其他系统的efi记录则不要格式化，否则可能会破坏其他系统启动。 </mark></p>\n<h2 id=\"挂载分区\"><a href=\"#挂载分区\" class=\"headerlink\" title=\"挂载分区\"></a>挂载分区</h2><p><mark>注意：一定要按照顺序挂载</mark><br>首先挂载根目录使用<code>mount /dev/根目录分区  /mnt</code>,<br>然后创建efi目录并挂载EFI分区使用<code>mkdir /mnt/efi &amp;&amp; mount /dev/EFI分区 /mnt/efi</code>,<br>最后挂载swap分区<code>swapon /dev/swap_partition（交换空间分区）</code>。</p>\n<h2 id=\"开始安装\"><a href=\"#开始安装\" class=\"headerlink\" title=\"开始安装\"></a>开始安装</h2><p>使用<code>pacstrap -K /mnt base base-devel intel-ucode linux linux-firmware vim vi dhcpcd iwd net-tools NetworkManager</code>如果有其他需要安装的软件一并写到后面。</p>\n<blockquote>\n<p>这时候建议把一些中文字体一并安装好<code>sudo pacman -S adobe-source-han-serif-cn-fonts adobe-source-han-sans-cn-fonts adobe-source-code-pro-fonts noto-fonts-cjk</code></p>\n</blockquote>\n<h2 id=\"配置系统\"><a href=\"#配置系统\" class=\"headerlink\" title=\"配置系统\"></a>配置系统</h2><h3 id=\"生成-fstab-文件\"><a href=\"#生成-fstab-文件\" class=\"headerlink\" title=\"生成 fstab 文件\"></a>生成 fstab 文件</h3><blockquote>\n<p>genfstab -U &#x2F;mnt &gt;&gt; &#x2F;mnt&#x2F;etc&#x2F;fstab</p>\n</blockquote>\n<h3 id=\"chroot-到新安装的系统\"><a href=\"#chroot-到新安装的系统\" class=\"headerlink\" title=\"chroot 到新安装的系统\"></a>chroot 到新安装的系统</h3><blockquote>\n<p>arch-chroot &#x2F;mnt</p>\n</blockquote>\n<h3 id=\"设置-root-密码\"><a href=\"#设置-root-密码\" class=\"headerlink\" title=\"设置 root 密码\"></a>设置 root 密码</h3><blockquote>\n<p>passwd</p>\n</blockquote>\n<h2 id=\"重启继续配置\"><a href=\"#重启继续配置\" class=\"headerlink\" title=\"重启继续配置\"></a>重启继续配置</h2><h3 id=\"启动网络相关服务并联网\"><a href=\"#启动网络相关服务并联网\" class=\"headerlink\" title=\"启动网络相关服务并联网\"></a>启动网络相关服务并联网</h3><p><code>systemctl enable iwd dhcpcd</code>并且start他们。<br>使用<code>iwctl</code>工具联网。</p>\n<h4 id=\"也可使用NetworkManager联网\"><a href=\"#也可使用NetworkManager联网\" class=\"headerlink\" title=\"也可使用NetworkManager联网\"></a>也可使用NetworkManager联网</h4><p>使用之前要start并且enable<code>NetworkManager</code>服务，注意大小写。然后使用<code>nmtui</code>联网，这个工具在装好字体后可以连接中文wifi。</p>\n<h3 id=\"检查mirrorlist是否正确\"><a href=\"#检查mirrorlist是否正确\" class=\"headerlink\" title=\"检查mirrorlist是否正确\"></a>检查mirrorlist是否正确</h3><p>之后运行<code>pacman -Syyu</code>更新pacman缓存。</p>\n<h2 id=\"添加普通用户并划分组别\"><a href=\"#添加普通用户并划分组别\" class=\"headerlink\" title=\"添加普通用户并划分组别\"></a>添加普通用户并划分组别</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#创建新用户username并且使其加入到wheel组中</span></span><br><span class=\"line\">useradd -m -G wheel -s /bin/bash username</span><br><span class=\"line\"><span class=\"comment\">#更改密码</span></span><br><span class=\"line\">passwd username</span><br><span class=\"line\"><span class=\"comment\">#修改sudoers文件，使wheel用户组拥有使用sudo的权限</span></span><br><span class=\"line\">visudo</span><br><span class=\"line\"><span class=\"comment\">#然后取消%wheel ALL=(ALL) ALL这一行的注释，使其生效</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"更改时间\"><a href=\"#更改时间\" class=\"headerlink\" title=\"更改时间\"></a>更改时间</h2><p>更改时间首先需要更改时区，使用<code>timedatectl set-timezone Asia/Shanghai</code>。之后使用<a href=\"https://wiki.archlinuxcn.org/wiki/Systemd-timesyncd\">systemd-timesyncd</a>来进行时间同步。把配置文件<code>/etc/systemd/timesyncd.conf</code>中的<code>NTP</code>字段改为如下。</p>\n<blockquote>\n<p>NTP&#x3D;0.cn.pool.ntp.org 1.cn.pool.ntp.org 2.cn.pool.ntp.org 3.cn.pool.ntp.org</p>\n</blockquote>\n<p>然后</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#启用ntp</span></span><br><span class=\"line\">timedatectl set-ntp <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"comment\">#启用服务</span></span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> systemd-timesyncd</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"安装基本完毕\"><a href=\"#安装基本完毕\" class=\"headerlink\" title=\"安装基本完毕\"></a>安装基本完毕</h2><h2 id=\"参考教程\"><a href=\"#参考教程\" class=\"headerlink\" title=\"参考教程\"></a>参考教程</h2><p><a href=\"https://wiki.archlinuxcn.org/wiki/%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97\">官方安装指南</a><br><a href=\"https://gitcode.csdn.net/66e10c20cd8b2677c3bd09f8.html\">Linux用户管理</a><br><a href=\"https://blog.csdn.net/Antonio915/article/details/144803692\">Linux修改权限控制</a></p>\n","excerpt":"","more":"<h2 id=\"准备好最新的ISO镜像\"><a href=\"#准备好最新的ISO镜像\" class=\"headerlink\" title=\"准备好最新的ISO镜像\"></a>准备好最新的ISO镜像</h2><p>可以从<a href=\"https://mirrors.bfsu.edu.cn/archlinux/iso/\">这里</a>下载。</p>\n<h2 id=\"使用U盘引导\"><a href=\"#使用U盘引导\" class=\"headerlink\" title=\"使用U盘引导\"></a>使用U盘引导</h2><p>我使用的是Ventoy。</p>\n<h2 id=\"SGX错误导致不能从启动盘启动\"><a href=\"#SGX错误导致不能从启动盘启动\" class=\"headerlink\" title=\"SGX错误导致不能从启动盘启动\"></a>SGX错误导致不能从启动盘启动</h2><blockquote>\n<p>错误比较玄学，不懂原理。解决方法，使用grub引导进入iso。</p>\n</blockquote>\n<h2 id=\"换源\"><a href=\"#换源\" class=\"headerlink\" title=\"换源\"></a>换源</h2><p>使用vim修改<code>/etc/pacman.d/mirrorlist</code>，修改为<code>Server = http://mirrors.bfsu.edu.cn/archlinux/$repo/os/$arch</code>。</p>\n<h2 id=\"联网\"><a href=\"#联网\" class=\"headerlink\" title=\"联网\"></a>联网</h2><p>有线网开机后自动配置无需联网。无线网需要连接wifi。</p>\n<h3 id=\"使用ip-link检测网络接口\"><a href=\"#使用ip-link检测网络接口\" class=\"headerlink\" title=\"使用ip link检测网络接口\"></a>使用ip link检测网络接口</h3><p>一般情况下无线网络接口为wlan x，一般为wlan0。</p>\n<h3 id=\"使用iwctl认证无线网络\"><a href=\"#使用iwctl认证无线网络\" class=\"headerlink\" title=\"使用iwctl认证无线网络\"></a>使用iwctl认证无线网络</h3><p>使用方法：使用<code>iwctl</code>进入交互界面。<mark>(一定要注意dhcpd服务是否已经打开)</mark></p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">方法</th>\n<th align=\"center\">作用</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">help</td>\n<td align=\"center\">显示命令详情</td>\n</tr>\n<tr>\n<td align=\"center\">device list</td>\n<td align=\"center\">列出所有wifi设备</td>\n</tr>\n<tr>\n<td align=\"center\">station device_name scan</td>\n<td align=\"center\">使用某个设备扫描wifi</td>\n</tr>\n<tr>\n<td align=\"center\">station device_name get-networks</td>\n<td align=\"center\">列出所有可用的网络</td>\n</tr>\n<tr>\n<td align=\"center\">station device_name connect SSID</td>\n<td align=\"center\">连接到一个网络</td>\n</tr>\n</tbody></table>\n<h3 id=\"连接完毕后验证\"><a href=\"#连接完毕后验证\" class=\"headerlink\" title=\"连接完毕后验证\"></a>连接完毕后验证</h3><p>使用<code>ping baidu.com</code>来检测连通性。</p>\n<h2 id=\"设置时间\"><a href=\"#设置时间\" class=\"headerlink\" title=\"设置时间\"></a>设置时间</h2><p>使用<code>timedatectl set-timezone Asia/Shanghai</code></p>\n<h2 id=\"更新pacman缓存\"><a href=\"#更新pacman缓存\" class=\"headerlink\" title=\"更新pacman缓存\"></a>更新pacman缓存</h2><p>使用<code>pacman -Syy</code></p>\n<h2 id=\"创建硬盘分区\"><a href=\"#创建硬盘分区\" class=\"headerlink\" title=\"创建硬盘分区\"></a>创建硬盘分区</h2><h3 id=\"使用fdisk-dev-硬盘-来进行分区\"><a href=\"#使用fdisk-dev-硬盘-来进行分区\" class=\"headerlink\" title=\"使用fdisk &#x2F;dev&#x2F;硬盘 来进行分区\"></a>使用fdisk &#x2F;dev&#x2F;硬盘 来进行分区</h3><p>进入fidsk交互窗口之前，可以使用<code>fdisk -l</code>来查询设备上的硬盘有哪些。(忽略以 rom、loop 或者airootfs结尾和以 rpbm、boot0 或者 boot1 结尾的 mmcblk* 结尾的设备。)</p>\n<h3 id=\"建立挂载点-和-boot-所对应分区，按需求建立SWAP分区\"><a href=\"#建立挂载点-和-boot-所对应分区，按需求建立SWAP分区\" class=\"headerlink\" title=\"建立挂载点 &#x2F; 和 &#x2F;boot 所对应分区，按需求建立SWAP分区\"></a>建立挂载点 &#x2F; 和 &#x2F;boot 所对应分区，按需求建立SWAP分区</h3><p>建立的类型大小和挂载点对应关系见<a href=\"https://wiki.archlinuxcn.org/wiki/%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97#%E5%BB%BA%E7%AB%8B%E7%A1%AC%E7%9B%98%E5%88%86%E5%8C%BA\">这里</a></p>\n<h3 id=\"本次采用GPT-UEFI模式，所以使用到EFI分区，更改分区类型\"><a href=\"#本次采用GPT-UEFI模式，所以使用到EFI分区，更改分区类型\" class=\"headerlink\" title=\"本次采用GPT+UEFI模式，所以使用到EFI分区，更改分区类型\"></a>本次采用GPT+UEFI模式，所以使用到EFI分区，更改分区类型</h3><p>更改分区类型，比如<code>/</code>分区为Linux filesystem类型，<code>/boot</code>为EFI System分区类型，<code>SWAP</code>为Linux swap分区类型。<br>在fdisk中 使用命令t更改。</p>\n<h3 id=\"格式化分区\"><a href=\"#格式化分区\" class=\"headerlink\" title=\"格式化分区\"></a>格式化分区</h3><p><mark>注意：这里操作的是分区不是硬盘</mark><br>根目录所用分区使用<code>mkfs.ext4 /dev/分区</code>。<br>交换空间分区使用<code>mkswap /dev/swap_partition</code>。<br>EFI 系统分区使用<code>mkfs.fat -F 32 /dev/efi_system_partition</code>命令格为fat32格式。<br><mark> 注意：如果efi分区内已经有其他系统的efi记录则不要格式化，否则可能会破坏其他系统启动。 </mark></p>\n<h2 id=\"挂载分区\"><a href=\"#挂载分区\" class=\"headerlink\" title=\"挂载分区\"></a>挂载分区</h2><p><mark>注意：一定要按照顺序挂载</mark><br>首先挂载根目录使用<code>mount /dev/根目录分区  /mnt</code>,<br>然后创建efi目录并挂载EFI分区使用<code>mkdir /mnt/efi &amp;&amp; mount /dev/EFI分区 /mnt/efi</code>,<br>最后挂载swap分区<code>swapon /dev/swap_partition（交换空间分区）</code>。</p>\n<h2 id=\"开始安装\"><a href=\"#开始安装\" class=\"headerlink\" title=\"开始安装\"></a>开始安装</h2><p>使用<code>pacstrap -K /mnt base base-devel intel-ucode linux linux-firmware vim vi dhcpcd iwd net-tools NetworkManager</code>如果有其他需要安装的软件一并写到后面。</p>\n<blockquote>\n<p>这时候建议把一些中文字体一并安装好<code>sudo pacman -S adobe-source-han-serif-cn-fonts adobe-source-han-sans-cn-fonts adobe-source-code-pro-fonts noto-fonts-cjk</code></p>\n</blockquote>\n<h2 id=\"配置系统\"><a href=\"#配置系统\" class=\"headerlink\" title=\"配置系统\"></a>配置系统</h2><h3 id=\"生成-fstab-文件\"><a href=\"#生成-fstab-文件\" class=\"headerlink\" title=\"生成 fstab 文件\"></a>生成 fstab 文件</h3><blockquote>\n<p>genfstab -U &#x2F;mnt &gt;&gt; &#x2F;mnt&#x2F;etc&#x2F;fstab</p>\n</blockquote>\n<h3 id=\"chroot-到新安装的系统\"><a href=\"#chroot-到新安装的系统\" class=\"headerlink\" title=\"chroot 到新安装的系统\"></a>chroot 到新安装的系统</h3><blockquote>\n<p>arch-chroot &#x2F;mnt</p>\n</blockquote>\n<h3 id=\"设置-root-密码\"><a href=\"#设置-root-密码\" class=\"headerlink\" title=\"设置 root 密码\"></a>设置 root 密码</h3><blockquote>\n<p>passwd</p>\n</blockquote>\n<h2 id=\"重启继续配置\"><a href=\"#重启继续配置\" class=\"headerlink\" title=\"重启继续配置\"></a>重启继续配置</h2><h3 id=\"启动网络相关服务并联网\"><a href=\"#启动网络相关服务并联网\" class=\"headerlink\" title=\"启动网络相关服务并联网\"></a>启动网络相关服务并联网</h3><p><code>systemctl enable iwd dhcpcd</code>并且start他们。<br>使用<code>iwctl</code>工具联网。</p>\n<h4 id=\"也可使用NetworkManager联网\"><a href=\"#也可使用NetworkManager联网\" class=\"headerlink\" title=\"也可使用NetworkManager联网\"></a>也可使用NetworkManager联网</h4><p>使用之前要start并且enable<code>NetworkManager</code>服务，注意大小写。然后使用<code>nmtui</code>联网，这个工具在装好字体后可以连接中文wifi。</p>\n<h3 id=\"检查mirrorlist是否正确\"><a href=\"#检查mirrorlist是否正确\" class=\"headerlink\" title=\"检查mirrorlist是否正确\"></a>检查mirrorlist是否正确</h3><p>之后运行<code>pacman -Syyu</code>更新pacman缓存。</p>\n<h2 id=\"添加普通用户并划分组别\"><a href=\"#添加普通用户并划分组别\" class=\"headerlink\" title=\"添加普通用户并划分组别\"></a>添加普通用户并划分组别</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#创建新用户username并且使其加入到wheel组中</span></span><br><span class=\"line\">useradd -m -G wheel -s /bin/bash username</span><br><span class=\"line\"><span class=\"comment\">#更改密码</span></span><br><span class=\"line\">passwd username</span><br><span class=\"line\"><span class=\"comment\">#修改sudoers文件，使wheel用户组拥有使用sudo的权限</span></span><br><span class=\"line\">visudo</span><br><span class=\"line\"><span class=\"comment\">#然后取消%wheel ALL=(ALL) ALL这一行的注释，使其生效</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"更改时间\"><a href=\"#更改时间\" class=\"headerlink\" title=\"更改时间\"></a>更改时间</h2><p>更改时间首先需要更改时区，使用<code>timedatectl set-timezone Asia/Shanghai</code>。之后使用<a href=\"https://wiki.archlinuxcn.org/wiki/Systemd-timesyncd\">systemd-timesyncd</a>来进行时间同步。把配置文件<code>/etc/systemd/timesyncd.conf</code>中的<code>NTP</code>字段改为如下。</p>\n<blockquote>\n<p>NTP&#x3D;0.cn.pool.ntp.org 1.cn.pool.ntp.org 2.cn.pool.ntp.org 3.cn.pool.ntp.org</p>\n</blockquote>\n<p>然后</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#启用ntp</span></span><br><span class=\"line\">timedatectl set-ntp <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"comment\">#启用服务</span></span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> systemd-timesyncd</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"安装基本完毕\"><a href=\"#安装基本完毕\" class=\"headerlink\" title=\"安装基本完毕\"></a>安装基本完毕</h2><h2 id=\"参考教程\"><a href=\"#参考教程\" class=\"headerlink\" title=\"参考教程\"></a>参考教程</h2><p><a href=\"https://wiki.archlinuxcn.org/wiki/%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97\">官方安装指南</a><br><a href=\"https://gitcode.csdn.net/66e10c20cd8b2677c3bd09f8.html\">Linux用户管理</a><br><a href=\"https://blog.csdn.net/Antonio915/article/details/144803692\">Linux修改权限控制</a></p>\n","path":"2024/12/30/ArchLinux安装指南备忘录/","permalink":"http://example.com/2024/12/30/ArchLinux%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97%E5%A4%87%E5%BF%98%E5%BD%95/","tags":[{"name":"linux","_id":"cm5dxxj1d0002dwo2ffwx8hsw","slug":"linux","path":"tags/linux/","permalink":"http://example.com/tags/linux/","length":6}],"categories":[],"prev":{"title":"Chmod和Chown使用指南","date":"2024-12-31T07:36:01.000Z","summary":"chmod和chown有什么区别","slug":"chmod和chown使用指南","published":true,"updated":"2024-12-31T07:44:42.138Z","_id":"cm5dxxj1e0003dwo286czfy0j","layout":"post","photos":[],"excerpt":"","path":"2024/12/31/chmod和chown使用指南/","permalink":"http://example.com/2024/12/31/chmod%E5%92%8Cchown%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","__post":true},"next":{"title":"笔记本ArchLinux配置杂项","date":"2024-12-30T11:49:00.000Z","summary":"我的C302Archlinux的一些配置杂项","slug":"我的C302Archlinux的一些配置杂项","published":true,"updated":"2024-12-31T15:12:07.429Z","_id":"cm5dxxj1h0005dwo2ehbp1gmf","layout":"post","photos":[],"excerpt":"","path":"2024/12/30/我的C302Archlinux的一些配置杂项/","permalink":"http://example.com/2024/12/30/%E6%88%91%E7%9A%84C302Archlinux%E7%9A%84%E4%B8%80%E4%BA%9B%E9%85%8D%E7%BD%AE%E6%9D%82%E9%A1%B9/","__post":true},"__post":true}